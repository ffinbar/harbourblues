<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modospace</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
</head>
<body>
<svg viewBox="0 0 3508 2481" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" class="bghero">
    <g>
        <g transform="matrix(0,4.16667,4.16667,0,1694.66,785.652)">
            <path d="M-188.557,-406.719L406.719,-406.719L406.719,-188.557L158.367,-188.557L-188.557,-406.719Z" style="fill:rgb(3,4,4);fill-rule:nonzero;"/>
        </g>
        <g transform="matrix(-3.64131,2.02533,2.02533,3.64131,1675.66,2955.58)">
            <path d="M-729.082,-406.156L-15.364,-406.156L105.354,-189.119L-439.731,114.063L-729.082,-406.156Z" style="fill:rgb(253,212,6);fill-rule:nonzero;"/>
        </g>
    </g>
    <g>
        <g transform="matrix(4.16667,0,0,4.16667,1017.3,1655.41)">
            <path d="M0,57.732L0,-0.71L13.674,21.734L52.768,-0.71L52.768,58.442L0,57.732Z" style="fill:white;fill-rule:nonzero;"/>
        </g>
        <g>
            <g transform="matrix(4.16667,0,0,4.16667,1427.55,1658.4)">
                <path d="M0,58.102L-14.744,11.059L-14.744,58.102L-24.682,58.102L-24.682,0L-8.896,0L5.211,46.322L19.235,0L35.024,0L35.024,58.102L25.086,58.102L25.086,11.059L10.34,58.102L0,58.102Z" style="fill:rgb(35,31,32);fill-rule:nonzero;"/>
            </g>
            <g transform="matrix(4.16667,0,0,4.16667,1721.45,1688.78)">
                <path d="M0,43.518C9.618,43.518 17.23,35.824 17.23,21.718C17.23,7.615 9.618,-0 0,-0C-9.618,-0 -17.23,7.615 -17.23,21.718C-17.23,35.824 -9.618,43.518 0,43.518M0,51.852C-17.07,51.852 -27.729,39.591 -27.729,21.718C-27.729,3.848 -17.07,-8.334 0,-8.334C17.07,-8.334 27.729,3.848 27.729,21.718C27.729,39.591 17.07,51.852 0,51.852" style="fill:rgb(35,31,32);fill-rule:nonzero;"/>
            </g>
            <g transform="matrix(4.16667,0,0,4.16667,1933.53,1866.43)">
                <path d="M0,-41.754L-5.211,-41.754L-5.211,-0L0,-0C11.14,-0 22.359,-2.486 22.359,-20.918C22.359,-39.268 11.14,-41.754 0,-41.754M0.48,-49.928C18.912,-49.928 32.937,-43.597 32.937,-20.918C32.937,1.764 18.912,8.174 0.48,8.174L-15.387,8.174L-15.387,-49.928L0.48,-49.928Z" style="fill:rgb(35,31,32);fill-rule:nonzero;"/>
            </g>
            <g transform="matrix(4.16667,0,0,4.16667,2218.39,1688.78)">
                <path d="M0,43.518C9.618,43.518 17.23,35.824 17.23,21.718C17.23,7.615 9.618,-0 0,-0C-9.618,-0 -17.23,7.615 -17.23,21.718C-17.23,35.824 -9.618,43.518 0,43.518M0,51.852C-17.07,51.852 -27.729,39.591 -27.729,21.718C-27.729,3.848 -17.07,-8.334 0,-8.334C17.07,-8.334 27.729,3.848 27.729,21.718C27.729,39.591 17.07,51.852 0,51.852" style="fill:rgb(35,31,32);fill-rule:nonzero;"/>
            </g>
            <g transform="matrix(4.16667,0,0,4.16667,2434.46,1768.26)">
                <path d="M0,5.368C-9.134,3.525 -16.749,-1.202 -16.749,-11.061C-16.749,-21.96 -5.449,-27.409 5.211,-27.409C16.671,-27.409 25.645,-22.201 27.971,-10.098L18.115,-10.098C16.429,-17.072 10.34,-19.075 4.649,-19.075C0.163,-19.075 -6.491,-17.072 -6.491,-11.381C-6.491,-6.893 -2.803,-4.648 2.166,-3.688L9.297,-2.326C19.477,-0.32 29.173,3.365 29.173,15.067C29.173,26.766 17.553,32.777 6.093,32.777C-7.694,32.777 -17.148,25.244 -18.35,12.5L-8.334,12.5C-6.57,20.435 -1.441,24.443 6.573,24.443C13.466,24.443 18.994,21.317 18.994,15.708C18.994,9.775 12.584,7.772 7.053,6.73L0,5.368Z" style="fill:rgb(35,31,32);fill-rule:nonzero;"/>
            </g>
            <g transform="matrix(4.16667,0,0,4.16667,2632.52,1866.43)">
                <path d="M0,-41.754L0,-22.12L9.458,-22.12C17.151,-22.12 23.081,-23.241 23.081,-31.578C23.081,-41.032 16.109,-41.754 8.977,-41.754L0,-41.754ZM8.977,-49.928C21.718,-49.928 33.659,-47.844 33.659,-31.656C33.659,-16.991 22.842,-13.786 9.137,-13.786L0,-13.786L0,8.174L-10.177,8.174L-10.177,-49.928L8.977,-49.928Z" style="fill:rgb(35,31,32);fill-rule:nonzero;"/>
            </g>
            <g transform="matrix(4.16667,0,0,4.16667,2821.21,1747.55)">
                <path d="M0,15.306L17.553,15.306L8.736,-9.617L0,15.306ZM3.767,-21.398L14.508,-21.398L36.305,36.704L25.165,36.704L20.598,23.8L-2.963,23.8L-7.452,36.704L-17.87,36.704L3.767,-21.398Z" style="fill:rgb(35,31,32);fill-rule:nonzero;"/>
            </g>
            <g transform="matrix(4.16667,0,0,4.16667,3183.55,1738.87)">
                <path d="M0,19.474C-2.404,32.457 -11.702,39.83 -25.086,39.83C-42.074,39.83 -51.934,27.729 -51.934,9.536C-51.934,-8.736 -41.434,-20.356 -24.603,-20.356C-11.702,-20.356 -2.486,-12.983 -0.16,-0L-9.938,-0C-11.702,-7.854 -17.393,-12.022 -24.926,-12.022C-34.142,-12.022 -41.434,-4.489 -41.434,9.536C-41.434,23.642 -34.302,31.496 -25.005,31.496C-17.151,31.496 -11.542,27.409 -9.778,19.474L0,19.474Z" style="fill:rgb(35,31,32);fill-rule:nonzero;"/>
            </g>
            <g transform="matrix(4.16667,0,0,4.16667,3212.63,1900.49)">
                <path d="M0,-58.102L41.111,-58.102L41.111,-49.608L10.177,-49.608L10.177,-34.061L39.428,-34.061L39.428,-25.645L10.177,-25.645L10.177,-8.576L41.111,-8.576L41.111,0L0,0L0,-58.102Z" style="fill:rgb(35,31,32);fill-rule:nonzero;"/>
            </g>
        </g>
    </g>
    <g transform="matrix(4.16667,0,0,4.16667,0,1445.52)">
        <path d="M0,-346.924L218.162,0L841.89,-346.924L0,-346.924Z" style="fill:white;fill-rule:nonzero;"/>
    </g>
</svg>

    <button class="enquire-button" id="enquire-btn">ENQUIRE.</button>
    
    <header class="header">
        <div class="header-content">
            <img src="logo.svg" alt="Modospace Logo" class="logo">
            <!-- <div class="hamburger" id="hamburger">
                <div class="hamburger-line"></div>
                <div class="hamburger-line"></div>
                <div class="hamburger-line"></div>
            </div> -->
        </div>
    </header>

    <!-- Case Study Carousel -->
    <section class="carousel-section">
        <div class="carousel-container">
            <div class="carousel-main" id="carousel-main">
                <div class="carousel-image-container">
                    <img class="carousel-image active" id="main-image" src="elements/images/kitchencab/kitchen_full.png" alt="Kitchen Cabinet - Full">
                </div>
            </div>
            
            <div class="carousel-indicators">
                <div class="indicator-dot active" data-case="0"></div>
                <div class="indicator-dot" data-case="1"></div>
                <div class="indicator-dot" data-case="2"></div>
            </div>
        </div>
    </section>

    <!-- Looping Video Section -->
    <section class="video-section">
        <div class="loop-media-container">
            <!-- Video for browsers that support transparent WebM -->
            <video class="loop-video" autoplay muted loop playsinline webkit-playsinline>
                <source src="elements/loop.webm" type="video/webm">
                <!-- Fallback content (will show if video fails) -->
                <img src="elements/loop.gif" alt="Looping animation" class="loop-gif">
            </video>
            <!-- GIF fallback for Safari/iOS (controlled by CSS/JS) -->
            <img src="elements/loop.gif" alt="Looping animation" class="loop-gif safari-fallback">
        </div>
    </section>

    <!-- Enquiry Form Section -->
    <section class="enquiry-section">
        <div class="enquiry-container">
            <div class="form-header">
                <h2>MORE SOON.</h2>
                <p>Interested in MODOSPACE? Sign up to stay in the loop as we build.</p>
            </div>
            
            <form id="enquiryForm" class="enquiry-form" netlify name="enquiry">
                <div class="form-group">
                    <input type="text" id="enquiry-name" name="name" required placeholder="Name">
                </div>
                
                <div class="form-group">
                    <input type="email" id="enquiry-email" name="email" required placeholder="Email">
                </div>
                
                <div class="form-group awkward-space-toggle">
                    <label class="toggle-label">
                        <input type="checkbox" id="awkward-space-toggle" name="include_awkward_space">
                        <span class="checkbox-custom"></span>
                        <span class="toggle-text">I have an awkward space to share</span>
                    </label>
                    <p class="toggle-description">Upload a photo of your awkward space - we will choose 5 to actually make!</p>
                </div>
                
                <div class="form-group awkward-space-section" id="awkward-space-section" style="display: none;">
                    <label for="space-description">Describe your awkward space</label>
                    <textarea id="space-description" name="space_description" placeholder="Tell us about the space dimensions, challenges, and what you'd like to achieve..."></textarea>
                    
                    <label for="space-photo">Upload Photo</label>
                    <div class="file-upload-container">
                        <input type="file" id="space-photo" name="space_photo" accept="image/*">
                        <div class="file-upload-display">
                            <span class="file-upload-text">Choose photo or drag & drop</span>
                            <div class="file-preview" id="file-preview"></div>
                        </div>
                    </div>
                </div>
                
                <button type="submit" class="enquiry-submit-btn" id="enquiry-submit-btn">
                    <span class="button-text" id="enquiry-button-text">Send Enquiry</span>
                    <div class="loading-spinner" id="enquiry-loading" style="display: none;"></div>
                </button>
                
                <div class="form-message" id="enquiry-message"></div>
            </form>
        </div>
    </section>

    <!-- <footer class="footer">
        <p class="footer-text">&copy; 2025 Modospace. All rights reserved.</p>
    </footer> -->

    <script>
        
        // const hamburger = document.getElementById('hamburger');
        const enquireButton = document.getElementById('enquire-btn');
        
        // hamburger.addEventListener('click', function() {
        //     this.classList.toggle('active');
        // });

        if (enquireButton) {
            enquireButton.addEventListener('click', function() {
                // Scroll to enquiry form
                document.querySelector('.enquiry-section').scrollIntoView({ 
                    behavior: 'smooth' 
                });
            });
        }

        // Carousel Functionality
        const caseStudies = [
            {
            name: 'Kitchen Cabinet',
            images: [
                { src: 'elements/images/kitchencab/kitchen_full.png', stage: 'Lived In' },
                { src: 'elements/images/kitchencab/kitchen_empty.jpg', stage: 'Before Installation' },
                { src: 'elements/images/kitchencab/kitchen_def.png', stage: 'After Installation' }
            ]
            },
            {
            name: 'Bathroom Cabinet',
            images: [
                { src: 'elements/images/bathroomcab/cab_full.png', stage: 'Lived In' },
                { src: 'elements/images/bathroomcab/cab_empty.png', stage: 'Before Installation' },
                { src: 'elements/images/bathroomcab/cab_default.png', stage: 'After Installation' }
            ]
            },
            {
            name: 'Entryway Cabinet',
            images: [
                { src: 'elements/images/entrywaycab/entry_full.png', stage: 'Lived In' },
                { src: 'elements/images/entrywaycab/entry_empty.png', stage: 'Before Installation' },
                { src: 'elements/images/entrywaycab/entry_def.png', stage: 'After Installation' }
            ]
            }
        ];

        let currentCaseIndex = 0;
        let currentImageIndex = 0;
        let intervalId;

        const mainImage = document.getElementById('main-image');
        const indicators = document.querySelectorAll('.indicator-dot');

        function updateCarousel() {
            const currentCaseData = caseStudies[currentCaseIndex];
            const currentImageData = currentCaseData.images[currentImageIndex];
            
            // Create new image element for smooth transition
            const newImage = document.createElement('img');
            newImage.className = 'carousel-image';
            newImage.src = currentImageData.src;
            newImage.alt = `${currentCaseData.name} - ${currentImageData.stage}`;
            
            // Add to container
            const container = document.querySelector('.carousel-image-container');
            container.appendChild(newImage);
            
            // Trigger transition
            setTimeout(() => {
                newImage.classList.add('active');
                mainImage.classList.remove('active');
            }, 50);
            
            // Remove old image after transition
            setTimeout(() => {
                if (mainImage.parentNode === container) {
                    container.removeChild(mainImage);
                }
                // Update reference to new image
                mainImage.id = '';
                newImage.id = 'main-image';
                // Update global reference
                window.mainImage = newImage;
            }, 850);
            
            // Update indicators
            updateIndicators();
        }

        function updateIndicators() {
            indicators.forEach((indicator, index) => {
                indicator.classList.toggle('active', index === currentCaseIndex);
            });
        }

        function nextSlide() {
            currentImageIndex++;
            
            // If we've shown all images for current case, move to next case
            if (currentImageIndex >= caseStudies[currentCaseIndex].images.length) {
                currentImageIndex = 0;
                currentCaseIndex = (currentCaseIndex + 1) % caseStudies.length;
            }
            
            updateCarousel();
        }

        function startCarousel() {
            stopCarousel();
            intervalId = setInterval(nextSlide, 3000); // Change slide every 3 seconds
        }

        function stopCarousel() {
            if (intervalId) {
                clearInterval(intervalId);
            }
        }

        function goToNextCase() {
            // Move to next case and reset image index
            currentCaseIndex = (currentCaseIndex + 1) % caseStudies.length;
            currentImageIndex = 0;
            updateCarousel();
            
            // Restart the carousel to maintain timing
            startCarousel();
        }

        function goToCase(caseIndex) {
            if (caseIndex !== currentCaseIndex) {
                currentCaseIndex = caseIndex;
                currentImageIndex = 0;
                updateCarousel();
                
                // Restart the carousel to maintain timing
                startCarousel();
            }
        }

        // Initialize carousel
        document.addEventListener('DOMContentLoaded', function() {
            // Update global reference after DOM is loaded
            window.mainImage = document.getElementById('main-image');
            
            // Add click listener to main image
            const carouselMain = document.getElementById('carousel-main');
            carouselMain.addEventListener('click', function() {
                goToNextCase();
            });
            
            // Add click listeners to indicator dots
            indicators.forEach((indicator, index) => {
                indicator.addEventListener('click', function() {
                    goToCase(index);
                });
            });
            
            // Initialize indicators
            updateIndicators();
            
            // Start the carousel
            startCarousel();
        });

        // Pause cycling when tab is not visible
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                stopCarousel();
            } else {
                startCarousel();
            }
        });

        // Enquiry Form Functionality
        const enquiryForm = document.getElementById('enquiryForm');
        const awkwardSpaceToggle = document.getElementById('awkward-space-toggle');
        const awkwardSpaceSection = document.getElementById('awkward-space-section');
        const spacePhoto = document.getElementById('space-photo');
        const filePreview = document.getElementById('file-preview');
        const enquirySubmitBtn = document.getElementById('enquiry-submit-btn');
        const enquiryLoading = document.getElementById('enquiry-loading');
        const enquiryButtonText = document.getElementById('enquiry-button-text');
        const enquiryMessage = document.getElementById('enquiry-message');

        // Toggle awkward space section
        awkwardSpaceToggle.addEventListener('change', function() {
            if (this.checked) {
                awkwardSpaceSection.style.display = 'block';
                awkwardSpaceSection.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            } else {
                awkwardSpaceSection.style.display = 'none';
                // Clear the awkward space fields
                document.getElementById('space-description').value = '';
                spacePhoto.value = '';
                filePreview.innerHTML = '';
            }
        });

        // File upload preview
        spacePhoto.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                if (file.size > 10 * 1024 * 1024) { // 10MB limit
                    showEnquiryMessage('File size must be less than 10MB', 'error');
                    this.value = '';
                    return;
                }

                const reader = new FileReader();
                reader.onload = function(e) {
                    filePreview.innerHTML = `
                        <img src="${e.target.result}" alt="Preview" style="max-width: 200px; max-height: 200px; object-fit: cover; border-radius: 4px;">
                        <p>${file.name}</p>
                    `;
                };
                reader.readAsDataURL(file);
            } else {
                filePreview.innerHTML = '';
            }
        });

        // Show message function
        function showEnquiryMessage(text, type) {
            enquiryMessage.textContent = text;
            enquiryMessage.className = `form-message ${type}`;
            enquiryMessage.style.display = 'block';
            
            // Auto-hide success messages
            if (type === 'success') {
                setTimeout(() => {
                    enquiryMessage.style.display = 'none';
                }, 5000);
            }
        }

        // Set loading state
        function setEnquiryLoading(isLoading) {
            if (isLoading) {
                enquirySubmitBtn.disabled = true;
                enquiryLoading.style.display = 'inline-block';
                enquiryButtonText.textContent = 'Sending...';
            } else {
                enquirySubmitBtn.disabled = false;
                enquiryLoading.style.display = 'none';
                enquiryButtonText.textContent = 'Send Enquiry';
            }
        }

        // Handle form submission
        enquiryForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const formData = new FormData(enquiryForm);
            const name = formData.get('name').trim();
            const email = formData.get('email').trim();
            const includeAwkwardSpace = formData.get('include_awkward_space') === 'on';
            const photoFile = formData.get('space_photo');
            
            if (!name || !email) {
                showEnquiryMessage('Please fill in all required fields.', 'error');
                return;
            }

            // Check file size limit (Netlify has a 8MB limit for file uploads)
            if (includeAwkwardSpace && photoFile && photoFile.size > 8 * 1024 * 1024) {
                showEnquiryMessage('File size must be less than 8MB', 'error');
                return;
            }
            
            setEnquiryLoading(true);
            
            try {
                // Add form-name for Netlify
                formData.append('form-name', 'enquiry');
                
                // Submit form data to Netlify
                const response = await fetch('/', {
                    method: 'POST',
                    body: formData
                });
                
                if (response.ok) {
                    showEnquiryMessage('ðŸŽ‰ Thank you! Your enquiry has been submitted successfully.', 'success');
                    enquiryForm.reset();
                    filePreview.innerHTML = '';
                    awkwardSpaceSection.style.display = 'none';
                    awkwardSpaceToggle.checked = false;
                } else {
                    throw new Error('Form submission failed');
                }
            } catch (error) {
                console.error('Form submission error:', error);
                showEnquiryMessage('Something went wrong. Please try again.', 'error');
            }
            
            setEnquiryLoading(false);
        });

        // Clear message when user starts typing
        document.getElementById('enquiry-name').addEventListener('input', () => {
            if (enquiryMessage.style.display === 'block') {
                enquiryMessage.style.display = 'none';
            }
        });
        
        document.getElementById('enquiry-email').addEventListener('input', () => {
            if (enquiryMessage.style.display === 'block') {
                enquiryMessage.style.display = 'none';
            }
        });

        // Safari/iOS detection for video fallback
        function isSafari() {
            const ua = navigator.userAgent;
            return /Safari/.test(ua) && !/Chrome/.test(ua) && !/Chromium/.test(ua);
        }

        function isiOS() {
            return /iPad|iPhone|iPod/.test(navigator.userAgent);
        }

        // Apply Safari class if needed
        if (isSafari() || isiOS()) {
            document.body.classList.add('is-safari');
            // console.log('Safari/iOS detected - using GIF fallback');
        }
    </script>

</body>
</html>